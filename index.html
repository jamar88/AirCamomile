<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seznam Dětí</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        table {
            width: 80%;
            margin: 20px auto;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid black;
            padding: 10px;
            text-align: center;
        }
        th {
            background-color: #f4f4f4;
        }
    </style>
</head>
<body>
    <h2>Seznam Dětí</h2>
    <table id="data-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Jméno Příjmení</th>
                <th>Barva Týmu</th>
                <th>Stav Skenování</th>
                <th>Čas Skenování</th>
            </tr>
        </thead>
        <tbody>
            <!-- Data se načtou sem -->
        </tbody>
    </table>

    <script>
        async function fetchData() {
            const apiUrl = "https://script.google.com/macros/s/AKfycbxMBu2saO4W2XnbhrrXxDzS9QX-MK3TFaEHTCFAm15w9OV4FOPXMwM9RM48QdqtbmAO/exec"; // Sem vlož URL API
            try {
                const response = await fetch(apiUrl);
                const data = await response.json();
                
                const tableBody = document.querySelector("#data-table tbody");
                tableBody.innerHTML = ""; // Vymazání starých dat
                
                data.forEach(row => {
                    const tr = document.createElement("tr");
                    tr.innerHTML = `
                        <td>${row.id}</td>
                        <td>${row.name}</td>
                        <td style="background-color: ${getColor(row.color)}">${row.color}</td>
                        <td>${row.scanned}</td>
                        <td>${row.timestamp}</td>
                    `;
                    tableBody.appendChild(tr);
                });
            } catch (error) {
                console.error("Chyba při načítání dat:", error);
            }
        }

        function getColor(colorName) {
            const colors = {
                "Zelená": "#4CAF50",
                "Modrá": "#2196F3",
                "Červená": "#F44336",
                "Žlutá": "#FFEB3B",
                "Fialová": "#9C27B0"
            };
            return colors[colorName] || "#FFFFFF";
        }

        fetchData();
        setInterval(fetchData, 5000); // Obnovuje data každých 5 sekund
    </script>
</body>
</html>
